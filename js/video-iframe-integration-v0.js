(function(){'use strict';var f;function g(a){return a||{}};var l;function m(a,b,d){var c=n();a.addEventListener(b,function(e){try{return d(e)}catch(h){throw self.__AMP_REPORT_ERROR(h),h;}},c?void 0:!1)}function n(){if(void 0!==l)return l;l=!1;try{var a={get capture(){l=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(b){}return l};function p(a){new Promise(function(b){b(a())})};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function q(a){var b=!1,d=null,c=a;return function(e){for(var h=[],k=0;k<arguments.length;++k)h[k-0]=arguments[k];b||(d=c.apply(self,h),b=!0,c=null);return d}};var r=self.AMP_CONFIG||{},t=("string"==typeof r.cdnProxyRegex?new RegExp(r.cdnProxyRegex):r.cdnProxyRegex)||/^https:\/\/([a-zA-Z0-9_-]+\.)?cdn\.ampproject\.org$/;function u(a){if(self.document&&self.document.head&&(!self.location||!t.test(self.location.origin))){var b=self.document.head.querySelector('meta[name="'+a+'"]');b&&b.getAttribute("content")}}r.cdnUrl||u("runtime-host");r.geoApiUrl||u("amp-geo-api");self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};function v(a,b,d){m(a,b,d)};function w(a){try{return JSON.parse(a)}catch(b){return null}};function x(a,b){for(var d=[],c=1;c<arguments.length;++c)d[c-1]=arguments[c];if(!a)throw Error("[<amp-video-iframe>] "+d.join(" ")+" https://go.amp.dev/c/amp-video-iframe");return a}var y="pause play mute unmute fullscreenenter fullscreenexit showcontrols hidecontrols".split(" ");
function z(a){var b=this;this.G=!0;this.C=0;this.j={};this.h=a;this.o={};this.l=q(function(){A(b.h,function(d){var c=d.id;if("number"===typeof c&&isFinite(c)&&b.j[c])(0,b.j[c])(d.args),delete b.j[c];else if("method"==d.event&&(d=d.method,d in b.o))b.o[d]()})});this.B=this.A=!1;this.D=q(function(){return w(b.h.name)})}f=z.prototype;f.getMetadata=function(){return this.D()};f.method=function(a,b){x(-1<y.indexOf(a),"Invalid method "+a+".");var d="play"==a||"pause"==a?B(b):b;this.o[a]=d;this.l()};
f.listenTo=function(a,b,d){var c=this;x(!this.B,"`listenTo` is meant to be used once per page.");var e={jwplayer:function(){x(!d,"listenTo('jwplayer', opt_instance) does not take an initializer.");var h=c.F;if(b){x(b.on,"listenTo('jwplayer', myjwplayer) takes a jwplayer instance as ","second argument");var k=b}else k=x(c.h.jwplayer,"listenTo('jwplayer') expects a global jwplayer() in window.")();h.call(c,k)},videojs:function(){C(c,x(b,"listenTo('videojs', element) expects a second argument"),d)}};
x(e[a.toLowerCase()],"Invalid listener type ["+a+"].","Valid types are ["+Object.keys(e).join(", ")+"]")();this.B=!0};
f.F=function(a){var b=arguments,d=this;["error","setupError"].forEach(function(e){a.on(e,function(){x.apply(null,[!1].concat(b));d.postEvent("error")})});["adSkipped","adComplete","adError"].forEach(function(e){a.on(e,function(){return d.postEvent("ad_end")})});a.on("adStarted",function(){return d.postEvent("ad_start")});var c={play:"playing",ready:"canplay",pause:"pause"};Object.keys(c).forEach(function(e){a.on(e,function(){return d.postEvent(c[e])})});a.on("volume",function(e){return D(d,e.volume)});
this.method("play",function(){return a.play()});this.method("pause",function(){return a.pause()});this.method("mute",function(){return a.setMute(!0)});this.method("unmute",function(){return a.setMute(!1)});this.method("showcontrols",function(){return a.setControls(!0)});this.method("hidecontrols",function(){return a.setControls(!1)});this.method("fullscreenenter",function(){return a.setFullscreen(!0)});this.method("fullscreenexit",function(){return a.setFullscreen(!1)})};
function C(a,b,d){var c=x(d||a.h.videojs,"Video.JS not imported or initializer undefined.")(b);c.ready(function(){["playing","pause","ended"].forEach(function(e){c.on(e,function(){return a.postEvent(e)})});if(3<=c.readyState())a.postEvent("canplay");else c.on("canplay",function(){return a.postEvent("canplay")});v(b,"volumechange",function(){return D(a,c.volume())});a.method("play",function(){return c.play()});a.method("pause",function(){return c.pause()});a.method("mute",function(){return c.muted(!0)});
a.method("unmute",function(){return c.muted(!1)});a.method("showcontrols",function(){return c.controls(!0)});a.method("hidecontrols",function(){return c.controls(!1)});a.method("fullscreenenter",function(){return c.requestFullscreen()});a.method("fullscreenexit",function(){return c.exitFullscreen()})})}function D(a,b){.01>b?(a.A=!0,a.postEvent("muted")):a.A&&(a.A=!1,a.postEvent("unmuted"))}function B(a){return function(){try{p(function(){return a()})}catch(b){}}}f.postEvent=function(a){E(this,g({event:a}))};
f.postAnalyticsEvent=function(a,b){E(this,g({event:"analytics",analytics:{eventType:a,vars:b}}))};function E(a,b,d){var c=a.C++,e=Object.assign({},{id:c},b);a.h.parent&&a.h.parent.postMessage(e,"*");d&&(a.j[c]=d)}f.getIntersection=function(a){this.l();E(this,g({method:"getIntersection"}),a)};f.getConsentData=function(a){this.l();E(this,g({method:"getConsentData"}),a)};function A(a,b){v(a,"message",function(d){(d=w(d.data))&&b(d)})}
(function(a){x(!a.__AMP__VIDEO_IFRAME__,"video-iframe-integration-v0.js should only be included once.");a.__AMP__VIDEO_IFRAME__=!0;a.__AMP_REPORT_ERROR=console.error.bind(console);var b=new z(a),d=a.AmpVideoIframe=a.AmpVideoIframe||[];d.push=function(c){return c(b)};d.forEach(d.push)})(self);})();

//# sourceMappingURL=video-iframe-integration-v0.js.map
